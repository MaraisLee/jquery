<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>스터디</title>
    <script
      src="https://code.jquery.com/jquery-3.6.4.min.js"
      integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8="
      crossorigin="anonymous"
    ></script>
    <style>
      body {
        background: #333;
      }
      .box {
        width: 900px;
        background: yellow;
        margin: 0 auto;
        transition: all 0.5s;
      }
      .big {
        width: 500px;
        height: 700px;
      }
      .gallery {
        display: flex;
        flex-wrap: wrap;
        align-items: flex-end;
      }
      .gallery > li {
        width: 25%;
        margin-bottom: 10px;
      }
    </style>
  </head>
  <body>
    <div class="box">
      <button class="bt">데이터 호출</button>
      <div class="wrap">데이터가 아직없어요.</div>
    </div>
  </body>
</html>
<script>
  // 데이터
  const data = "<ul><li>내용</li></ul>";
  const api =
    "https://api.thecatapi.com/v1/breeds?api_key=live_Z9dx0VtiK2f0qbMsh1fhE7Z3Sw21vaP79MAhtKChl3XFPpWKvoBDSa6OSqZHYNSJ";
  // Pure JavaScript
  window.onload = function () {
    // js 선택하기
    const bt = document.querySelector(".bt");
    const wrap = document.querySelector(".wrap");
    // 데이터 화면에 출력
    bt.addEventListener("click", async function () {
      // 글자를 넣기
      // wrap.textContent = data;
      // html을 넣기
      // wrap.innerHTML = data;

      return; // 아래 구문 실행하지 마라.

      // 외부데이터 연동
      await fetch(api)
        .then((res) => res.json()) //   response 데이터를 json 형태로 변환
        .then((data) => {
          data = data.splice(0, 20);
          let html = "<ul class=gallery>";
          for (let i = 0; i < data.length; i++) {
            html += `
                <li>
                    <h2>
                        ${data[i].name}
                    </h2>
                    <div>
                        <img src=${data[i].image.url} width="200" height="200" />
                    </div>
                </li>
            `;
          }
          html += "</ul>";

          wrap.textContent = html;
          wrap.innerHTML = html;

          // json 데이터를 문자열로 만들어서
          // 서버로 보낼때 JSON.stringify(data);
        })
        .catch((err) => console.log(err));
    });
  };

  // jQuery
  $(document).ready(function () {
    // jQuery 선택하기
    const bt = $(".bt");
    const wrap = $(".wrap");
    // 데이터 화면에 출력
    bt.click(function () {
      // 글자를 넣기
      // wrap.text(data);
      // html을 넣기
      // wrap.html(data);

      // 외부데이터 연동
      $.ajax({
        url: api,
      })
        .done((res) => {
          let data = res;
          console.log(data);
          data = data.splice(0, 20);
          let html = "<ul class=gallery>";
          for (let i = 0; i < data.length; i++) {
            html += `
                <li>
                    <h2>
                        ${data[i].name}
                    </h2>
                    <div>
                        <img src=${data[i].image.url} width="200" height="200" />
                    </div>
                </li>
            `;
          }
          html += "</ul>";

          // wrap.text(html);
          wrap.html(html);
        })
        .fail((err) => console.log(err));
    });
  });
</script>
